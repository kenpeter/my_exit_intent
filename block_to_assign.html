<!-- css -->
<!-- NOTE, if you update the ./css/style.css, the commit number will change -->
<!-- you need to grab a new commit number -->
<link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/kenpeter/my_exit_intent/f4656816ee4187d14055bdb63a388c0e44c114e9/css/style.css">

<!-- o ui bounce -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ouibounce/0.0.12/ouibounce.min.js"></script>

<!-- o uni bounce modal -->
<div id="ouibounce-modal">
  <!-- we need this, it is under layer-->
  <div class="underlay"></div>
  
  <!-- modal -->
  <div class="modal">
    <!-- title -->
    <div class="modal-title">
      <h3>Amber Aviation Academy</h3>
    </div>

    <!-- body -->
    <div class="modal-body">
      <form action="/my_exit_intent/post.json" method="post">
        <p>Thanks for stoping by.</p>
        <input type="text" placeholder="you@email.com" name="email" />
				<input type="hidden" name="api_username" value="api_username" />
				<input type="hidden" name="api_password" value="api_password" />
        <input type="submit" value="Subscribe" />
      </form>
    </div>

    <!-- footer -->
    <!-- no thanks, display none-->
    <div class="modal-footer">
      <!-- on click -->
      <!-- get element by id, style display noe-->
      <p onclick="document.getElementById('ouibounce-modal').style.display = 'none';">no thanks</p>
    </div>
  </div>
</div>

<script>
  // var
  // _o ui bounce
  // o ui bounce
  // document get element by id
  // get the id ouibounce-modal
  var _ouibounce = ouibounce(document.getElementById('ouibounce-modal'),{
    aggressive: false, //Making this true makes ouibounce not to obey "once per visitor" rule
  });
  
  
  // scroll to bottom detection
  jQuery(window).scroll(function() {
    if(jQuery(window).scrollTop() + jQuery(window).height() > jQuery(document).height() - 50) {
      _ouibounce.fire();
      console.log("near bottom!");
    }
  });
</script>
